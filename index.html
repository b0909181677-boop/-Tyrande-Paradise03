<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>泰蘭德劇場手寫筆記本</title>
    <!-- 引入手寫風格字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&family=Ma+Shan+Zheng&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --paper-color: #f4ecd8;
            --line-color: #dcd0b8;
            --accent-color: #8b7355;
            --text-color: #4a3728;
        }

        body {
            background-color: var(--paper-color);
            background-image: 
                radial-gradient(circle at 2px 2px, var(--line-color) 1px, transparent 0);
            background-size: 30px 30px;
            color: var(--text-color);
            font-family: 'Ma+Shan+Zheng', 'Noto+Sans+TC', cursive;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .handwritten {
            font-family: 'Ma+Shan+Zheng', cursive;
        }

        /* 筆記本容器 */
        .notebook-container {
            max-width: 800px;
            margin: 0 auto;
            background: #fffef9;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
            border: 2px solid var(--accent-color);
            position: relative;
        }

        .notebook-container::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            border-left: 2px dashed var(--accent-color);
            opacity: 0.3;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        /* 標籤頁排列 - 手機端自動換行 */
        .tabs-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .tab-button {
            background: var(--line-color);
            padding: 8px 15px;
            border-radius: 20px 20px 0 0;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--accent-color);
            font-size: 1.1rem;
            color: var(--text-color);
        }

        .tab-button.active {
            background: #fffef9;
            border-bottom: 2px solid #fffef9;
            transform: translateY(2px);
            font-weight: bold;
        }

        /* 按鈕區域 */
        .content-area {
            border-top: 2px solid var(--accent-color);
            padding-top: 20px;
            min-height: 300px;
        }

        .buttons-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .drama-btn {
            background: white;
            border: 1.5px solid var(--accent-color);
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.1s;
            box-shadow: 2px 2px 0px var(--accent-color);
            color: var(--text-color);
        }

        .drama-btn:active {
            transform: translate(2px, 2px);
            box-shadow: 0px 0px 0px var(--accent-color);
        }

        .add-action-btn {
            background: #e8f5e9;
            border: 1px dashed #4caf50;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            color: #2e7d32;
        }

        /* 彈窗樣式 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background: #fffef9;
            width: 100%;
            max-width: 500px;
            padding: 25px;
            border-radius: 15px;
            border: 3px solid var(--accent-color);
            position: relative;
        }

        textarea {
            width: 100%;
            height: 250px;
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--line-color);
            font-family: inherit;
            font-size: 1.1rem;
            line-height: 1.6;
            resize: none;
            outline: none;
            color: var(--text-color);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: flex-end;
        }

        .primary-btn {
            background: var(--accent-color);
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .danger-btn {
            background: #d32f2f;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .tag-manager {
            margin-top: 40px;
            text-align: center;
            border-top: 1px dashed var(--accent-color);
            padding-top: 20px;
        }
    </style>
</head>
<body>

<div class="notebook-container">
    <h1 class="handwritten">泰蘭德劇場</h1>

    <div id="tabs" class="tabs-container">
        <!-- 標籤按鈕 -->
    </div>

    <div class="content-area">
        <div id="buttonsGrid" class="buttons-grid">
            <!-- 劇名按鈕 -->
        </div>
    </div>

    <div class="tag-manager">
        <button onclick="addNewTag()" class="add-action-btn">+ 新增標籤</button>
        <button onclick="deleteCurrentTag()" class="danger-btn" style="background:#8b735544; color:#4a3728; border:1px solid #8b7355; margin-left: 10px;">刪除此標籤</button>
    </div>
</div>

<!-- 筆記彈窗 -->
<div id="noteModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle" class="handwritten text-xl font-bold">編輯筆記</h2>
            <button onclick="closeModal()">✕</button>
        </div>
        <div class="mb-4">
            <label class="block text-sm opacity-60">劇名：</label>
            <input id="editDramaName" type="text" class="w-full bg-transparent border-b border-gray-300 focus:outline-none text-lg">
        </div>
        <label class="block text-sm opacity-60">心得筆記：</label>
        <textarea id="noteContent" placeholder="寫下你的感想..."></textarea>
        <div class="btn-group">
            <button onclick="deleteDrama()" class="danger-btn">刪除此劇</button>
            <button onclick="saveNote()" class="primary-btn">儲存</button>
        </div>
    </div>
</div>

<script>
    const STORAGE_KEY = 'thailand_drama_notes_v19';

    let initialTags = [
        "Off&Gun", "Tay&New", "Pound&Phwin", "Joong&Dunk", 
        "Boun&Prem", "Earth&Mix", "Ohm&Nanon", "Force&Book", 
        "Aou&Boom", "Jimmy&Sea", "First&Khaotung", "Gemini&Fourth", 
        "Perth&Chimon", "William&Est", "Mile&Apo", "福桃", "其他"
    ];

    const ogDefaults = [
        { name: "我們的天空", note: "在第一集出場；是一個靈魂互換相互理解的小番外" },
        { name: "愛情理論/戀愛傳播學", note: "(有特別篇)經典校園虐戀~\n前期虐滾寶後期虐關大爺；全程虐觀眾。\n10分!!\n刷了好幾次了~就喜歡又甜又虐演技在線的戲啦~" },
        { name: "他不是我/Not Me", note: "黑暗、寫實、社會議題導向的硬派BL，堪稱泰BL史上最具深度與社會批判力的一部，可惜不是我喜歡的風格但不錯看。\n7分~\n槍爺超帥 小白好甜 Gun演技真的超猛!" },
        { name: "Cooking Crush", note: "整體風格輕鬆療癒、滿滿OffGun的經典互動：Gun的傲嬌可愛、Off的溫柔霸道，笑點密集、甜度爆表，適合想放鬆追的觀眾。雖然有些人覺得劇情後半稍亂或時間跳躍(有點尬)，但OffGun化學反應依舊炸裂，食物鏡頭拍得讓人流口水可無聊當下飯劇。\n8分~" },
        { name: "實習生愛情", note: "辦公室戀愛 實習生 × 前輩導師\n職場成長 / 療癒、輕鬆喜劇、甜寵互動、實習生聯盟、副CP甜線 (GL+BL) \n7分...\n挺搞笑 但感情線沒有寫多好，尤其是小海的bg戲份!!女的人設超爛...。\n最後OFF突然消失留學五年才回來就結束了...閃電完結的摸不著頭腦>w<" }
    ];

    const tnDefaults = [
        { name: "我們的天空", note: "第四集出場~\n妞利用厄運的藉口帶著呆各種玩了一天!超搞笑的OWO" },
        { name: "深藍之吻", note: "5分~\n有狗血的第三者綠茶情節，而且兩人要嘛缺乏溝通要嘛不信任對方...>A<" },
        { name: "櫻桃魔法", note: "8分!\n日漫改編得很成功!超純情的戀愛~~~\n呆愛了妞好多年~默默守護又超紳士的超暖心的~" }
    ];

    const ppDefaults = [
        { name: "天上的魚/戀上天空魚", note: "8分~\n他們的BL出道作，輕鬆搞笑校園戀\n前期挺搞笑的! 裡面的二哥越看越順眼!\n但...裡面的私生CP粉看得讓人心裡不適>A<" },
        { name: "只為你一人/Never Let Me Go", note: "7分~\n保鏢×少爺!!!\n小說超精彩!可惜劇裡改了很多>u<\n不過逃亡到島上的劇情超讚!\n我們的天空2有出現他們的番外!還是超萌的穿越互換身分!!!" },
        { name: "We Are/相愛的我們", note: "9分!\n大型群像甜寵大學BL~\n搞笑又甜到翻!每對CP都很香~友情線真的令人淚目>0<" },
        { name: "Me and Thee/冷靜點!Thee先生", note: "8分\n小麵包本色出演!超顛的肥皂劇霸總!全程搞笑!!!!泡芙的腳色有點像超雄...可惜呀~\n意外嗑到威廉與小鯊魚的少爺保鑣組合>w<" }
    ];

    const jdDefaults = [
        { name: "Star in My Mind/腦海中的星辰", note: "7分~\n小蛋好奶好可愛~\n冏...要不是因為真的帥不然真的被不長嘴的人設氣炸!\n愛得要死還推開、走了又不願意-_-\n我們的天空2中有出現兩集番外!很甜~~~" },
        { name: "隱愛議程", note: "8分!\n蛋喜歡的女生是冏前任，於是為了追妹子蛋就找了冏教學~全程高甜!\n可惜後面節奏怪怪的...\n好喜歡這裡的冏~~撩的不要不要的~~" },
        { name: "愛情獵殺/The Heart Killers", note: "8分!\n雙CP的四人都好養眼!冏糖的殺手兄弟設定我超喜歡!\n沉穩可靠的哥哥與瘋批可愛的弟弟>O<\n蛋的演技有待加強~畢對手都是演技挺好的~\n蛋他搞笑的人設真的好讚~誅九族式的告白...哈哈哈!!\n後面的監獄PLAY真的好香~" },
        { name: "Dare You to Death", note: "(驚悚/懸疑BL 下屬X上司)" }
    ];

    const bpDefaults = [
        { name: "待到重逢時(副CP)", note: "10分!!\n主線是FlukeOhm，但看到文總的Win就超級喜歡的!\n痞帥的暖男跟包包的Team相愛相殺的愛情線甜到爆，從這裡就瘋狂嗑BounPrem！" },
        { name: "戀愛七重奏(第四集)", note: "是個單元劇。\n有點虐戀但是HE" },
        { name: "我和我的太陽", note: "7分!\nBoun好帥~小太陽有點暴躁...哈哈哈!\n總之妥妥粉絲劇~" },
        { name: "我們之間/Between Us", note: "9分!\n《待到重逢時》的官方番外/前傳，超愛的WIN來啦!\n床戲加油壓~" },
        { name: "吸血鬼物語/Revamp: The Undead Story", note: "古董店的青年老闆Pun受委託負責修復一幅古畫，過程中他不慎被玻璃劃傷使得他意外喚醒沉睡百年的吸血鬼Ramil，兩人開始從互助到最後相愛，卻因種族衝突以及Ramil的過往陷入了信任危機..." }
    ];

    const emDefaults = [
        { name: "千星傳說", note: "9分!!\n垂直入坑球慧的劇!\n是鄉村背景所以一直沒興趣直到偶然刷到番外覺得故事有點意思才看的\n一看直接停不下來!拍的超好超純愛>w<\n風格：鄉村、療癒、成長、甜虐交織。\n我們的天空2有出演番外!" },
        { name: "邱比特的遺願", note: "7分\n慧慧演的超可愛!但腳色有點不太穩重就是了...\n球哥的腳色就是個大暖男!" },
        { name: "月光雞油飯", note: "6分\n慧慧開場爆擊!超好看~\n劇情偏寫實平淡，不是我的菜~\n但也是個好劇呦~一仔好可憐~去找你的糖抱抱吧!" },
        { name: "大叔的愛", note: "5分\n日漫改編的職場搞笑顛劇\n但球哥的人設...一言難盡...好像有看完吧?" }
    ];

    const onDefaults = [
        { name: "兩小無拆/Just Friends?", note: "10分!!經典呀~~~好看不俗套 劇情也不拖\n被裡面的吉米驚艷到了!好奶好帥~\n兩人演技一等一的好!" },
        { name: "我們的天空2", note: "在後面出現兩小的番外\n還是兩人到球慧那去的故事!\n雙廚狂喜!!!" }
    ];

    const fbDefaults = [
        { name: "誰是我那個他/Enchanté", note: "還沒看，忘了啥原因沒看的" },
        { name: "A Boss and a Babe/我的寶貝老闆", note: "8分!\n實習生×老闆\n偶然刷到主題曲被書書的美貌勾來得~\n開屏爆擊的書書超可愛且不做作\n佛寺超適合演霸總的 但聲音又超溫柔的~\n幾乎全程灑糖沒什麼特別劇情 很輕鬆~\n我們的天空2有番外!很有趣的一日互換身分PLAY~" },
        { name: "Only Friends/禁忌摯友", note: "群像劇裡的其中一個CP\n但寫實的成人劇情...讓我三觀毀又重塑的\n但他兩的劇情線還挺帶感的" },
        { name: "Perfect 10 Liners/男神俱樂部", note: "群像劇 還沒看" }
    ];

    const abDefaults = [
        { name: "We Are/相愛的我們", note: "大型群像大學BL\n年下ㄟ~超香的狗姊組合!\n因為這部才喜歡他們的" },
        { name: "Perfect 10 Liners/男神俱樂部", note: "" },
        { name: "Memoir of Rati(副CP)", note: "" },
        { name: "隱愛議程(副CP)", note: "" },
        { name: "Only Friends: Dream On", note: "群像劇 令人害怕的主役劇" },
        { name: "Billionaire Biker", note: "" }
    ];

    const jsDefaults = [
        { name: "反之亦愛/Vice Versa", note: "8分!\n編劇腦洞超開!是魂穿的穿越劇~\n吉米在裡面超搞笑的!\n很喜歡之中朋友間的氛圍~\n我們的天空2有番外!還是帶崽呦~" },
        { name: "不曾遺忘的暮色/Last Twilight", note: "7分\n細水長流的感情線 挺治癒的\n穩穩的蠻不錯的" },
        { name: "親愛的占卜師/My Magic Prophecy", note: "9分!\n當初看預告覺得還好，沒想到....超級好看!\n劇情簡單節奏OK，重點是邏輯!終於正常了!\n裡面的吉米簡直放飛自我超搞笑也超治癒~\n小海越看越好看了!" },
        { name: "I Will Always Save You", note: "" }
    ];

    const fkDefaults = [
        { name: "以愛為蝕/The Eclipse", note: "7分\n不錯!主懸疑推理向加些可愛的純情戲碼\n兩人得演技很吸睛\n我們的天空2中有番外" },
        { name: "Only Friends/禁忌摯友", note: "" },
        { name: "The Heart Killers/愛情獵殺", note: "殺手與警察線人!\n設定帶感!甜的同時又酸酸的!" },
        { name: "以貓飼愛", note: "" }
    ];

    const gfDefaults = [
        { name: "Moonlight Chicken/月光雞油飯", note: "副CP" },
        { name: "My School President/我的會長男友", note: "7分\n我們的天空2有番外" },
        { name: "消失的初戀", note: "6分\n日漫改編~但日版超好看!" }
    ];

    const pcDefaults = [
        { name: "只為你一人(副CP)", note: "" },
        { name: "危險羅曼史/Dangerous Romance", note: "7分\n前期泡芙霸靈奇萌的劇情真心不優...\n但後面滿甜的還有些虐\n兩人顏值演技都在線!" }
    ];

    const maDefaults = [
        { name: "黑幫少爺愛上我", note: "10分!!!\n每人顏值都在線，各有各的魅力!\n而且沒有泰式假打!打戲超帥!!!劇情搞笑!\n主CP不狗血 又純又慾的大人愛情!\nPETE小天使好甜~聰明又武力值再線!\n可惜真的不喜歡副CP的線" },
        { name: "Shine", note: "" }
    ];

    const fortPeatDefaults = [
        { name: "Love in the Air(愛在空氣中)", note: "9分\n第八集開始 NC超讚!超有感覺!福福的總裁 桃桃的男大都好香\n兩人有虐有甜!小說的肉真的...很頂!\n番外兩對CP的肉...ㄚㄚㄚ啊!" },
        { name: "海洋之戀/Love Sea", note: "7分\n桃桃的作家好精緻!純慾風玩得明明白白~\n後面的情節有點虐但演得很好!\n番外超香超甜" }
    ];

    const otherDefaults = [
        { name: "待到重逢時", note: "10分\nN刷了很多次!有甜倒掉牙也有虐到哭的...真心覺得不太膩" },
        { name: "鬼屋歷險記", note: "一堆ㄎ一ㄤㄎ一ㄤ的人在有女鬼的屋子發癲\n很瘋很誇張 還行吧" },
        { name: "零的魔力(後面有球慧)", note: "" },
        { name: "我們的天空", note: "有兩季 都是各種劇的番外!\n世上只有雞媽媽能這麼做了!求第三季壓!" },
        { name: "愛在空氣中(boss諾恩)", note: "一到七集是他們的小甜劇" },
        { name: "邪惡新郎愛上我", note: "7分\n狗血劇 演技還好\n有點背德設定 但攻不長嘴!受可憐的小哭包" },
        { name: "穿越天際靠近你(海景房)", note: "" },
        { name: "甜心派(海景房)", note: "" },
        { name: "職業替身", note: "中國同名小說改編 演技不錯" },
        { name: "四方極愛", note: "" },
        { name: "Leap Day/閨日奪魂", note: "小麵包滾寶主演的懸疑劇" },
        { name: "程心程意", note: "" },
        { name: "原來誓你", note: "" },
        { name: "被最想擁抱的男人給威脅了", note: "8分\n日漫改編 兩位顏值演技再線\n把一開始的強迫劇情改成慢慢曖昧這點很讚!" }
    ];

    let notebookData = JSON.parse(localStorage.getItem(STORAGE_KEY));
    
    if (!notebookData) {
        notebookData = {};
        initialTags.forEach(tag => {
            if (tag === "Off&Gun") notebookData[tag] = [...ogDefaults];
            else if (tag === "Tay&New") notebookData[tag] = [...tnDefaults];
            else if (tag === "Pound&Phwin") notebookData[tag] = [...ppDefaults];
            else if (tag === "Joong&Dunk") notebookData[tag] = [...jdDefaults];
            else if (tag === "Boun&Prem") notebookData[tag] = [...bpDefaults];
            else if (tag === "Earth&Mix") notebookData[tag] = [...emDefaults];
            else if (tag === "Ohm&Nanon") notebookData[tag] = [...onDefaults];
            else if (tag === "Force&Book") notebookData[tag] = [...fbDefaults];
            else if (tag === "Aou&Boom") notebookData[tag] = [...abDefaults];
            else if (tag === "Jimmy&Sea") notebookData[tag] = [...jsDefaults];
            else if (tag === "First&Khaotung") notebookData[tag] = [...fkDefaults];
            else if (tag === "Gemini&Fourth") notebookData[tag] = [...gfDefaults];
            else if (tag === "Perth&Chimon") notebookData[tag] = [...pcDefaults];
            else if (tag === "Mile&Apo") notebookData[tag] = [...maDefaults];
            else if (tag === "福桃") notebookData[tag] = [...fortPeatDefaults];
            else if (tag === "其他") notebookData[tag] = [...otherDefaults];
            else notebookData[tag] = [];
        });
    }

    let currentTag = "其他"; 
    let editingDramaIndex = -1;

    function init() {
        renderTabs();
        renderButtons();
    }

    function renderTabs() {
        const tabsDiv = document.getElementById('tabs');
        tabsDiv.innerHTML = '';
        Object.keys(notebookData).forEach(tag => {
            const btn = document.createElement('div');
            btn.className = `tab-button ${tag === currentTag ? 'active' : ''}`;
            btn.innerText = tag;
            btn.onclick = () => {
                currentTag = tag;
                renderTabs();
                renderButtons();
            };
            tabsDiv.appendChild(btn);
        });
    }

    function renderButtons() {
        const grid = document.getElementById('buttonsGrid');
        grid.innerHTML = '';
        const dramas = notebookData[currentTag] || [];
        dramas.forEach((drama, index) => {
            const btn = document.createElement('button');
            btn.className = 'drama-btn';
            btn.innerText = drama.name;
            btn.onclick = () => openModal(index);
            grid.appendChild(btn);
        });
        const addBtn = document.createElement('button');
        addBtn.className = 'add-action-btn';
        addBtn.innerText = '+ 新增劇目';
        addBtn.onclick = () => openModal(-1);
        grid.appendChild(addBtn);
    }

    function openModal(index) {
        editingDramaIndex = index;
        const modal = document.getElementById('noteModal');
        const titleInput = document.getElementById('editDramaName');
        const contentArea = document.getElementById('noteContent');
        
        if (index === -1) {
            titleInput.value = '';
            contentArea.value = '';
            document.getElementById('modalTitle').innerText = '新增劇目';
        } else {
            const data = notebookData[currentTag][index];
            titleInput.value = data.name;
            contentArea.value = data.note || '';
            document.getElementById('modalTitle').innerText = '編輯筆記';
        }
        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('noteModal').style.display = 'none';
    }

    function saveNote() {
        const name = document.getElementById('editDramaName').value.trim();
        const note = document.getElementById('noteContent').value;
        if (!name) return;

        if (editingDramaIndex === -1) {
            notebookData[currentTag].push({ name, note });
        } else {
            notebookData[currentTag][editingDramaIndex] = { name, note };
        }
        saveToLocalStorage();
        renderButtons();
        closeModal();
    }

    function deleteDrama() {
        if (editingDramaIndex === -1) { closeModal(); return; }
        if (confirm('確定刪除紀錄嗎？')) {
            notebookData[currentTag].splice(editingDramaIndex, 1);
            saveToLocalStorage();
            renderButtons();
            closeModal();
        }
    }

    function addNewTag() {
        const name = prompt('新標籤名稱：');
        if (name && !notebookData[name]) {
            notebookData[name] = [];
            currentTag = name;
            saveToLocalStorage();
            renderTabs(); renderButtons();
        }
    }

    function deleteCurrentTag() {
        if (confirm(`刪除「${currentTag}」及其內容？`)) {
            delete notebookData[currentTag];
            currentTag = Object.keys(notebookData)[0] || "其他";
            saveToLocalStorage();
            renderTabs(); renderButtons();
        }
    }

    function saveToLocalStorage() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(notebookData));
    }

    window.onclick = e => { if (e.target.id === 'noteModal') closeModal(); }
    init();
</script>
</body>
</html>